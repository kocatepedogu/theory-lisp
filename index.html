<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Theory Lisp: Theory Lisp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Theory Lisp
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Theory Lisp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> Theory Lisp is a simple language for simulating theoretical models of computation. Its syntax and functionality are similar to Lisp, but it is not truely a Lisp dialect.</p>
<p>The language is dynamically typed, dynamically scoped, and fully interpreted. Code can be represented as data, and it is possible to dynamically generate and execute code at runtime. The interpeter uses a recursive descent parser. Arbitrary user-defined expressions (even expressions that does not have list form) can be used by extending the parser with macros. Both imperative macros and pattern matching macros are available.</p>
<p>In addition to functional and imperative Lisp forms, Theory Lisp provides special syntax for designing automatons. The syntax can be used for designing finite state machines, single-tape or multi-tape Turing machines and (very simple) Markov chains. Composite machines can be constructed from simpler machines by using the smaller machines as base machines. The goal of the language is to be a self-contained educational tool for simulating automatons. The further development will be on adding different models of computation.</p>
<h1><a class="anchor" id="autotoc_md53"></a>
Dependencies</h1>
<p>The interpreter does not require any external libraries, but Check is needed for unit tests.</p>
<p>On Debian based systems,</p>
<div class="fragment"><div class="line">sudo apt install libcheck</div>
</div><!-- fragment --><p>On BSD, </p><div class="fragment"><div class="line">pkg install check</div>
</div><!-- fragment --><p>On Mac OS X (only tested on very old OS X 10.5 PPC with tigerbrew), </p><div class="fragment"><div class="line">brew install check</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md54"></a>
Installation</h1>
<p>On Linux, BSD and macOS/Mac OSX following commands will compile and install Theory Lisp</p>
<div class="fragment"><div class="line">autoreconf --install</div>
<div class="line">./configure</div>
<div class="line">make</div>
<div class="line">make install</div>
<div class="line">make check</div>
</div><!-- fragment --><p>It is recommended to use &ndash;prefix option in configure step to specify an installation directory that does not require root access.</p>
<h1><a class="anchor" id="autotoc_md55"></a>
Usage</h1>
<p>To start read-evaluate-print loop (REPL) without opening any program</p>
<div class="fragment"><div class="line">tlisp</div>
</div><!-- fragment --><p>To execute a Theory Lisp program</p>
<div class="fragment"><div class="line">tlisp code.tl</div>
</div><!-- fragment --><p>If the program does not explicitly exit at the end, the interpreter will start REPL. All global variables defined during the execution of the program are accessible in the REPL.</p>
<p>If REPL is not needed, use,</p>
<div class="fragment"><div class="line">tlisp code.tl -x</div>
</div><!-- fragment --><p>The -x option disables REPL, so that the interpreter always exits when the program finishes.</p>
<p>REPL currently does not support entering multi-line code.</p>
<h1><a class="anchor" id="autotoc_md56"></a>
Example Code</h1>
<p><b>Summation in modulo 2 using a finite automaton</b></p>
<div class="fragment"><div class="line">(include &quot;util.tl&quot;)</div>
<div class="line">(include &quot;automata.tl&quot;)</div>
<div class="line"> </div>
<div class="line">(define mod2sum</div>
<div class="line">  (automaton\1</div>
<div class="line">    (q0:R {(set! result 0)}</div>
<div class="line">      ({= 0} . q0)</div>
<div class="line">      ({= 1} . q1)</div>
<div class="line">      ({= blank} . halt))</div>
<div class="line"> </div>
<div class="line">    (q1:R {(set! result 1)}</div>
<div class="line">      ({= 0} . q1)</div>
<div class="line">      ({= 1} . q0)</div>
<div class="line">      ({= blank} . halt))</div>
<div class="line">  )</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">(let ((result -1))</div>
<div class="line">  (begin</div>
<div class="line">    (mod2sum (make-tape 1 1 0 1))</div>
<div class="line">    (println &quot;Result:&quot; result)))</div>
</div><!-- fragment --><p><b>Markov chain with 2 states</b></p>
<div class="fragment"><div class="line">(include &quot;automata.tl&quot;)</div>
<div class="line">(include &quot;util.tl&quot;)</div>
<div class="line"> </div>
<div class="line">; Total number of steps</div>
<div class="line">(define STEPS 1000)</div>
<div class="line"> </div>
<div class="line">; Number of visits for each state</div>
<div class="line">(define A 0)</div>
<div class="line">(define B 0)</div>
<div class="line"> </div>
<div class="line">; Stop condition</div>
<div class="line">(define done?</div>
<div class="line">  {= STEPS + A B})</div>
<div class="line"> </div>
<div class="line">; Definiton of the automaton</div>
<div class="line">(define MarkovChain</div>
<div class="line">  (automaton\0</div>
<div class="line">    (qA:P {(set! A (+ A 1))}</div>
<div class="line">      (done? accept)</div>
<div class="line">      ({p 0.3} qA)</div>
<div class="line">      ({p 0.7} qB))</div>
<div class="line">    (qB:P {(set! B (+ B 1))}</div>
<div class="line">      (done? reject)</div>
<div class="line">      ({p 0.2} qB)</div>
<div class="line">      ({p 0.8} qA))))</div>
<div class="line"> </div>
<div class="line">; Run automaton</div>
<div class="line">(let ((result (MarkovChain)))</div>
<div class="line">  (println &quot;Decision: &quot; (get-decision result)))</div>
<div class="line"> </div>
<div class="line">; Print results</div>
<div class="line">(let ((pA (* 100.0 (/ A STEPS)))</div>
<div class="line">      (pB (* 100.0 (/ B STEPS))))</div>
<div class="line">  (println &quot;Visit Percentages: qA: &quot; pA &quot; qB: &quot; pB))</div>
</div><!-- fragment --><p>There is a more complex Turing machine example together with a detailed state diagram in the examples directory. The examples here are just for demonstrating the general syntax. Pattern matching macro examples are also available in the examples. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
